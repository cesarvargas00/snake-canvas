<html>
<head>
    <title>Snake Canvas</title>
<script type="text/javascript">
/*jslint browser:true */
function randDir() {
    "use strict";
    var x = Math.random() * 4;
    return x - x % 1;
}

function rnd() {
    "use strict";
    var x = (Math.random() * 40);
    return x - x % 1;
}

function drawSquare(ctx, x, y, colour) {
    "use strict";
    ctx.fillStyle = colour;
    ctx.fillRect(x * 11 + 1, y * 11 + 1, 10, 10);
}

function drawSnake(ctx, snake, colour) {
    "use strict";
    var i;
    for (i = 0; i < snake.length; i = i + 1) {
        drawSquare(ctx, snake[i].x, snake[i].y, colour);
    }
}

function init() {
    "use strict";
    var canvas = document.getElementById('game'),
        ctx = canvas.getContext('2d'),
        bgSize = 441,
        bgColour = "rgb(140,0,0)",
        snakeColour = "rgb(255, 255, 200)",
        foodColour = "rgb(255, 0, 200)",
        food,
        snake = [],
        direction = randDir();


  //snake.pop();
  //snake.unshift(4);

    ctx.fillStyle = bgColour; //colours the board
    ctx.fillRect(0, 0, bgSize, bgSize);
    //spawns food and snake
    food = {
        x: rnd(),
        y: rnd()
    };
    do {
        snake.pop();
        snake.unshift({
            x: rnd(),
            y: rnd()
        });
    } while (snake[0].x === food.x && snake[0].y === food.y);
    drawSnake(ctx, snake, snakeColour);
    drawSquare(ctx, food.x, food.y, foodColour);

//I need to make a gameloop
    document.onkeydown = function (e) {
        var code = e.keyCode - 37;
        if (0 <= code && code <= 3) {
            if (code === 0) {
                snake.unshift({x: snake[0].x - 1, y: snake[0].y});
            } else if (code === 1) {
                snake.unshift({x: snake[0].x, y: snake[0].y - 1});
            } else if (code === 2) {
                snake.unshift({x: snake[0].x + 1, y: snake[0].y});
            } else if (code === 3) {
                snake.unshift({x: snake[0].x, y: snake[0].y + 1});
            }
            if ((snake[0].x !== food.x) || snake[0].y !== food.y)
            snake.pop();
            ctx.fillStyle = bgColour; //colours the board
            ctx.fillRect(0, 0, bgSize, bgSize);
            drawSquare(ctx, food.x, food.y, foodColour);
            drawSnake(ctx, snake, snakeColour);
        }
    };
}
window.onload = init;
</script>
</head>
<body>
    <h1>Snake Canvas</h1>
    <canvas id="game" width="441" height="441"></canvas>
</body>
</html>